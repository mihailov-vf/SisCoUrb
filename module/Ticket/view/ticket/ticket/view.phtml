<style>
    #map {
        height: 150px;
        width: 100%;
    }
</style>

<div class="row">
    <div class="col-md-5">
        <div id="map"></div>
    </div>

    <div class="col-md-7">
        <h2><?= $this->escapeHtml($ticket->getDescription()) ?></h2>
        <time class="comment-date" datetime="<?=
        $this->dateFormat(
            $ticket->getCreationDate(), IntlDateFormatter::SHORT, // date
            IntlDateFormatter::MEDIUM // time
        )
        ?>">
            <i class="fa fa-clock-o"></i> 
            <?=
            $this->dateFormat(
                $ticket->getCreationDate(), IntlDateFormatter::MEDIUM
            )
            ?>
        </time>
        <div>
            <i class="fa fa-exclamation-circle"></i>
            <?= $this->escapeHtml($ticket->getIssue()->getName()) ?>
        </div>
    </div>
</div>

<?php
echo $this->partial('comment/list.phtml', array(
    'notes' => $ticket->getNotes()
));
?>

<?php
echo $this->partial('comment/box.phtml');
?>

<script>
    var map = L.map('map');

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
        id: 'examples.map-i875mjb7'
    }).addTo(map);

    map.setView([<?= $ticket->getLocation()->getLatitude() . ',' . $ticket->getLocation()->getLongitude() ?>], 16);
    L.marker([<?= $ticket->getLocation()->getLatitude() . ',' . $ticket->getLocation()->getLongitude() ?>]).addTo(map);
</script>